<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Switch
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!Switch.html";
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo;
    
    
    <span class="title">Switch</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Switch
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Switch</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">rlib/switch.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>Holds a record for a Switch.</p>


  </div>
</div>
<div class="tags">
  

</div>



  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#category-instance_method" title="#category (instance method)">- (Object) <strong>category</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute category.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ip-instance_method" title="#ip (instance method)">- (Object) <strong>ip</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute ip.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#mac-instance_method" title="#mac (instance method)">- (Object) <strong>mac</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute mac.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (Object) <strong>name</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#ports-instance_method" title="#ports (instance method)">- (Object) <strong>ports</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute ports.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#switch_make-instance_method" title="#switch_make (instance method)">- (Object) <strong>switch_make</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute switch_make.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#switch_model-instance_method" title="#switch_model (instance method)">- (Object) <strong>switch_model</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute switch_model.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Switch) <strong>initialize</strong>(name, ip, mac, switch_make, switch_model, category, community, do_snmpwalk = false) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create an instance of Switch.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process_switch-instance_method" title="#process_switch (instance method)">- (Object) <strong>process_switch</strong>(ifTable_columns) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Process switch is called by snmpwalk to run a single SNMP query to retrieve
the OID or OIDS passed in.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remote_switch%3F-instance_method" title="#remote_switch? (instance method)">- (Boolean) <strong>remote_switch?</strong>(pport, switches) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is  a remote switch on this port, or just a host or hosts.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_is_our_switch-instance_method" title="#set_is_our_switch (instance method)">- (Object) <strong>set_is_our_switch</strong>(switches) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Process all switches, and tag switch ports, that are connected to another
of our switches.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#snmpwalk-instance_method" title="#snmpwalk (instance method)">- (Object) <strong>snmpwalk</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Snmpwalk is run to retrieve multiple OIDs from ths switch, and set switch
and port attributes.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (Object) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>To_s for this class for diagnositic purposes.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Switch (class)">Switch</a></span></tt>) <strong>initialize</strong>(name, ip, mac, switch_make, switch_model, category, community, do_snmpwalk = false) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create an instance of Switch</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Switch name</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>ip</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>IP address of the switch itself. If more than on IP address, then this is
an Array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>mac</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>MAC address of the switch itself. If more than one, then this is an Array.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>switch_make</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Manufacturers make</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>switch_model</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Manufacturers model</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>category</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Designates position in the network, which helps in making pretty pictures
[“external” | “private_core”, | “private_leaf” | …]</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>community</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>This switches SNMP read community string</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>do_snmpwalk</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>True, if we want to query the switch. False, if we want to skip this
switch.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23
24
25
26
27
28
29
30
31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_ip'>ip</span><span class='comma'>,</span> <span class='id identifier rubyid_mac'>mac</span><span class='comma'>,</span> <span class='id identifier rubyid_switch_make'>switch_make</span><span class='comma'>,</span> <span class='id identifier rubyid_switch_model'>switch_model</span><span class='comma'>,</span> <span class='id identifier rubyid_category'>category</span><span class='comma'>,</span> <span class='id identifier rubyid_community'>community</span><span class='comma'>,</span> <span class='id identifier rubyid_do_snmpwalk'>do_snmpwalk</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='ivar'>@name</span><span class='comma'>,</span> <span class='ivar'>@ip</span><span class='comma'>,</span> <span class='ivar'>@switch_make</span><span class='comma'>,</span> <span class='ivar'>@switch_model</span><span class='comma'>,</span> <span class='ivar'>@category</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_ip'>ip</span><span class='comma'>,</span>  <span class='id identifier rubyid_switch_make'>switch_make</span><span class='comma'>,</span> <span class='id identifier rubyid_switch_model'>switch_model</span><span class='comma'>,</span> <span class='id identifier rubyid_category'>category</span>
  <span class='ivar'>@community</span> <span class='op'>=</span> <span class='id identifier rubyid_community'>community</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_mac'>mac</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='const'>Array</span>
    <span class='ivar'>@mac</span> <span class='op'>=</span> <span class='id identifier rubyid_mac'>mac</span><span class='period'>.</span><span class='id identifier rubyid_collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='ivar'>@mac</span> <span class='op'>=</span> <span class='id identifier rubyid_mac'>mac</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
  <span class='kw'>end</span>
  <span class='ivar'>@ports</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@physical_port_map</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='comment'>#Port numbers in some parts of the MIB don&#39;t match the physical port numbers. Map from virtual -&gt; physical.
</span>  <span class='ivar'>@trunk_port_map</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id identifier rubyid_snmpwalk'>snmpwalk</span> <span class='kw'>if</span> <span class='id identifier rubyid_do_snmpwalk'>do_snmpwalk</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="category=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="category-instance_method">
  
    - (<tt>Object</tt>) <strong>category</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute category</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_category'>category</span>
  <span class='ivar'>@category</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="ip=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="ip-instance_method">
  
    - (<tt>Object</tt>) <strong>ip</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute ip</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ip'>ip</span>
  <span class='ivar'>@ip</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="mac=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="mac-instance_method">
  
    - (<tt>Object</tt>) <strong>mac</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute mac</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mac'>mac</span>
  <span class='ivar'>@mac</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="name=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    - (<tt>Object</tt>) <strong>name</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute name</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="ports=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="ports-instance_method">
  
    - (<tt>Object</tt>) <strong>ports</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute ports</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ports'>ports</span>
  <span class='ivar'>@ports</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="switch_make=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="switch_make-instance_method">
  
    - (<tt>Object</tt>) <strong>switch_make</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute switch_make</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_switch_make'>switch_make</span>
  <span class='ivar'>@switch_make</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="switch_model=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="switch_model-instance_method">
  
    - (<tt>Object</tt>) <strong>switch_model</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute switch_model</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_switch_model'>switch_model</span>
  <span class='ivar'>@switch_model</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="process_switch-instance_method">
  
    - (<tt>Object</tt>) <strong>process_switch</strong>(ifTable_columns) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Process switch is called by snmpwalk to run a single SNMP query to retrieve
the OID or OIDS passed in.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ifTable_columns</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The OIDS we want to retrieve from this switch.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


148
149
150
151
152
153
154
155
156
157
158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 148</span>

<span class='kw'>def</span> <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='id identifier rubyid_ifTable_columns'>ifTable_columns</span><span class='rparen'>)</span>
  <span class='kw'>begin</span>
    <span class='const'>SNMP</span><span class='op'>::</span><span class='const'>Manager</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='symbol'>:Host</span> <span class='op'>=&gt;</span> <span class='ivar'>@ip</span><span class='comma'>,</span> <span class='symbol'>:Community</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@community</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:Version</span> <span class='op'>=&gt;</span> <span class='symbol'>:SNMPv2c</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_manager'>manager</span><span class='op'>|</span>
      <span class='id identifier rubyid_manager'>manager</span><span class='period'>.</span><span class='id identifier rubyid_walk'>walk</span><span class='lparen'>(</span><span class='id identifier rubyid_ifTable_columns'>ifTable_columns</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_row'>row</span><span class='op'>|</span>
        <span class='id identifier rubyid_row'>row</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_vb'>vb</span><span class='op'>|</span> 
            <span class='id identifier rubyid_oid'>oid</span> <span class='op'>=</span> <span class='id identifier rubyid_vb'>vb</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>.</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
            <span class='kw'>yield</span> <span class='lbracket'>[</span><span class='id identifier rubyid_oid'>oid</span><span class='comma'>,</span> <span class='id identifier rubyid_vb'>vb</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>rescue</span> <span class='const'>Exception</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_message'>message</span>
    <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@name</span><span class='embexpr_end'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_message'>message</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remote_switch?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>remote_switch?</strong>(pport, switches) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Is  a remote switch on this port, or just a host or hosts. Check is made
using the results of querying the bridge MIB.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pport</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Port.html" title="Port (class)">Port</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Port record we want to test.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>switches</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Hash by switch name, of all Switch records.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 40</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remote_switch?'>remote_switch?</span><span class='lparen'>(</span><span class='id identifier rubyid_pport'>pport</span><span class='comma'>,</span> <span class='id identifier rubyid_switches'>switches</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_switches'>switches</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_sk'>sk</span><span class='comma'>,</span><span class='id identifier rubyid_sv'>sv</span><span class='op'>|</span> <span class='comment'>#Look on all the switches we have to see if the switch Mac and port Mac match
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_sv'>sv</span><span class='period'>.</span><span class='id identifier rubyid_mac'>mac</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span> <span class='op'>==</span> <span class='const'>Array</span>
      <span class='id identifier rubyid_sv'>sv</span><span class='period'>.</span><span class='id identifier rubyid_mac'>mac</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_mac'>mac</span><span class='op'>|</span>
        <span class='kw'>if</span> <span class='id identifier rubyid_mac'>mac</span> <span class='op'>==</span> <span class='id identifier rubyid_pport'>pport</span><span class='period'>.</span><span class='id identifier rubyid_remote_mac'>remote_mac</span> <span class='comment'>#We found a match
</span>           <span class='kw'>return</span> <span class='kw'>true</span> <span class='comment'>#Mark it as a bridge port.
</span>        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_sv'>sv</span><span class='period'>.</span><span class='id identifier rubyid_mac'>mac</span> <span class='op'>==</span> <span class='id identifier rubyid_pport'>pport</span><span class='period'>.</span><span class='id identifier rubyid_remote_mac'>remote_mac</span> <span class='comment'>#We found a match
</span>        <span class='kw'>return</span> <span class='kw'>true</span> <span class='comment'>#Mark it as a bridge port.
</span>      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_is_our_switch-instance_method">
  
    - (<tt>Object</tt>) <strong>set_is_our_switch</strong>(switches) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Process all switches, and tag switch ports, that are connected to another
of our switches.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>switches</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Hash by switch name, of all Switch records.</p>
</div>
      
    </li>
  
</ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61
62
63
64
65
66
67</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 59</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_is_our_switch'>set_is_our_switch</span><span class='lparen'>(</span><span class='id identifier rubyid_switches'>switches</span><span class='rparen'>)</span>
  <span class='ivar'>@ports</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_pkey'>pkey</span><span class='comma'>,</span> <span class='id identifier rubyid_pport'>pport</span><span class='op'>|</span><span class='comment'>#for each port on this switch
</span>    <span class='kw'>if</span><span class='lparen'>(</span><span class='id identifier rubyid_pport'>pport</span><span class='period'>.</span><span class='id identifier rubyid_remote_mac'>remote_mac</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pport'>pport</span><span class='period'>.</span><span class='id identifier rubyid_remote_mac'>remote_mac</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='comment'>#if we have a remote port recorded.
</span>      <span class='comment'>#puts &quot;#{@name} #{pport.port_number} #{pport.remote_mac} #{pport.remote_switch_name} #{pport.remote_port_number}&quot;
</span>      <span class='id identifier rubyid_pport'>pport</span><span class='period'>.</span><span class='id identifier rubyid_bridge_port'>bridge_port</span> <span class='op'>=</span> <span class='id identifier rubyid_remote_switch?'>remote_switch?</span><span class='lparen'>(</span><span class='id identifier rubyid_pport'>pport</span><span class='comma'>,</span> <span class='id identifier rubyid_switches'>switches</span><span class='rparen'>)</span>
      <span class='comment'>#puts &quot;  Bridge&quot; if pport.bridge_port
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="snmpwalk-instance_method">
  
    - (<tt>Object</tt>) <strong>snmpwalk</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Snmpwalk is run to retrieve multiple OIDs from ths switch, and set switch
and port attributes.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 75</span>

<span class='kw'>def</span> <span class='id identifier rubyid_snmpwalk'>snmpwalk</span>
  <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0.8802.1.1.2.1.3.7.1.3</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='comment'>#Port numbers
</span>    <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='comment'>#Pronto8 switch sets v to &#39;&#39;
</span>    <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Port</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span><span class='rparen'>)</span>
    <span class='ivar'>@trunk_port_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='comment'>#Prime the trunk to port mapping to be 1:1
</span>    <span class='ivar'>@physical_port_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0.8802.1.1.2.1.3.7.1.4</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='comment'>#Port names
</span>    <span class='id identifier rubyid_v'>v</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_v'>v</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='comment'>#Pronto8 switch sets v to &#39;&#39;
</span>    <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_port_name'>port_name</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
  <span class='kw'>end</span>
<span class='embdoc_beg'>=begin
</span><span class='embdoc'> #BAD TEST for switch: remote nodes type (7 seems to be a switch. 5 is used by the pronto switch. 3 seems to be a host. Except fmhs-003 uses 5 :( ))
</span><span class='embdoc'>  process_switch([&quot;1.0.8802.1.1.2.1.4.1.1.6&quot;]) do |k,v| 
</span><span class='embdoc'>    if v != &quot;3&quot; &amp;&amp; v != &quot;0&quot;
</span><span class='embdoc'>      @ports[k[-2]].bridge_port = true
</span><span class='embdoc'>    end
</span><span class='embdoc'>  end
</span><span class='embdoc_end'>=end
</span>  <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0.8802.1.1.2.1.4.1.1.5</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='comment'>#remote switch Mac address. Might also be a host running LLDP.
</span>    <span class='comment'>#Pronto8 switch sets v to &#39;&#39; if there is no remote switch. Other switches leave the OID out completely.
</span>    <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_remote_switch_name'>remote_switch_name</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span> <span class='comment'># Fill this in now, in case the switch name is blank in the next step.
</span>    <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_remote_mac'>remote_mac</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0.8802.1.1.2.1.4.1.1.9</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='comment'>#Names of connected switches
</span>    <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_remote_switch_name'>remote_switch_name</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span> <span class='comment'>#Might actually be a node name.
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0.8802.1.1.2.1.4.1.1.8</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>  <span class='comment'>#Names of remote port name
</span>    <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_remote_port_name'>remote_port_name</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.0.8802.1.1.2.1.4.1.1.7</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span>  <span class='comment'>#Names of remote port number
</span>    <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_remote_port_number'>remote_port_number</span> <span class='op'>=</span> <span class='id identifier rubyid_v'>v</span>
  <span class='kw'>end</span>
  
  <span class='comment'>#See if any of the LLDP entries we found are switches we know of. 
</span>  <span class='comment'>#If they are, mark entry as a switch
</span>  <span class='comment'>#If not, they may be hosts running LLDP, or switches we don&#39;t know about.
</span>  <span class='comment'>#In either case, treat them as a host for display purposes (will just get lots of ARP entries for switches and virtual switches)
</span>  
  <span class='comment'>#SNMPv2-SMI::mib-2.17.1.4.1.2.port =&gt; interface number
</span>  <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SNMPv2-SMI::mib-2.17.1.4.1.2</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> 
    <span class='kw'>if</span> <span class='ivar'>@switch_make</span> <span class='op'>!=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>juniper</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@physical_port_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_v'>v</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='comment'>#Physical port number is derived from using virtual port number as a hash index
</span>    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='comment'>#SNMPv2-SMI::enterprises.26543.2.7.4.2.3.9.2.1.1.&lt;trunk&gt;.&lt;port&gt; =&gt; &lt;trunk&gt;
</span>  <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SNMPv2-SMI::enterprises.26543.2.7.4.2.3.9.2.1.1</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> 
    <span class='comment'>#Most switches, this will be a null mapping, but for BNT wit LACP links, the trunk numbers are returned where we would expect port numbers on other switches.
</span>    <span class='ivar'>@trunk_port_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_v'>v</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='comment'>#Physical port number is derived from using trunk number as a hash index
</span>  <span class='kw'>end</span>
 
  <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IF-MIB::ifOperStatus</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> 
    <span class='id identifier rubyid_port_index'>port_index</span> <span class='op'>=</span> <span class='ivar'>@physical_port_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_port_index'>port_index</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_port_index'>port_index</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>nil</span>
      <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_port_index'>port_index</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_up'>up</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_v'>v</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> 
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  
  <span class='id identifier rubyid_process_switch'>process_switch</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SNMPv2-SMI::mib-2.17.4.3.1.2</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='comma'>,</span><span class='id identifier rubyid_v'>v</span><span class='op'>|</span> <span class='comment'>#switch port mac address
</span>  <span class='comment'>#process_switch([&quot;SNMPv2-SMI::mib-2.17.7.1.2.2.1.2.1&quot;]) do |k,v| #switch port mac address
</span>    <span class='id identifier rubyid_port_index'>port_index</span> <span class='op'>=</span> <span class='ivar'>@trunk_port_map</span><span class='lbracket'>[</span><span class='id identifier rubyid_v'>v</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_port_index'>port_index</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_port_index'>port_index</span><span class='rbracket'>]</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='comment'># &amp;&amp; @ports[port_index].bridge_port == false
</span>      <span class='id identifier rubyid_s'>s</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_k'>k</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>6</span><span class='comma'>,</span><span class='int'>6</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_x'>x</span><span class='op'>|</span> <span class='id identifier rubyid_s'>s</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%02X:</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
      <span class='id identifier rubyid_s'>s</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@ports</span><span class='lbracket'>[</span><span class='id identifier rubyid_port_index'>port_index</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_port_arp'>port_arp</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_s'>s</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    - (<tt>Object</tt>) <strong>to_s</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>To_s for this class for diagnositic purposes.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'rlib/switch.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>name=&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@name</span><span class='embexpr_end'>}</span><span class='tstring_content'>, ip=&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ip</span><span class='embexpr_end'>}</span><span class='tstring_content'> mac=&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@mac</span><span class='embexpr_end'>}</span><span class='tstring_content'> @switch_make=&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@switch_make</span><span class='embexpr_end'>}</span><span class='tstring_content'> @switch_model=&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@switch_model</span><span class='embexpr_end'>}</span><span class='tstring_content'> category=&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@category</span><span class='embexpr_end'>}</span><span class='tstring_content'> community=&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@communtiy</span><span class='embexpr_end'>}</span><span class='tstring_content'>\nports=&gt;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@ports</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Tue May 26 12:17:34 2015 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.2.2).
</div>

  </body>
</html>